<UserControl
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vlc="clr-namespace:LibVLCSharp.WPF;assembly=LibVLCSharp.WPF"
             x:Class="CMVideo.Controls"
             Height="Auto" Width="Auto">
    
    <!-- Define standard WPF resources for UI elements -->
    <UserControl.Resources>
        <!-- Custom button styles -->
        <Style x:Key="MediaButton" TargetType="Button">
            <Setter Property="Background" Value="#DDDDDD"/>
            <Setter Property="Foreground" Value="#333333"/>
            <Setter Property="BorderBrush" Value="#999999"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="5"/>
            <Setter Property="Width" Value="30"/>
            <Setter Property="Height" Value="30"/>
        </Style>
        
        <Style x:Key="RoundButton" TargetType="Button">
            <Setter Property="Background" Value="#DDDDDD"/>
            <Setter Property="Foreground" Value="#333333"/>
            <Setter Property="BorderBrush" Value="#999999"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" 
                                BorderBrush="{TemplateBinding BorderBrush}" 
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="10">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        
        <!-- Vector icon templates -->
        <ControlTemplate x:Key="RewindIcon">
            <Viewbox Stretch="Uniform">
                <Canvas Width="16" Height="16">
                    <Path Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" 
                          Data="M2,4 L8,8 L8,4 L14,8 L8,12 L8,8 L2,12 Z" />
                </Canvas>
            </Viewbox>
        </ControlTemplate>
        
        <ControlTemplate x:Key="StopIcon">
            <Viewbox Stretch="Uniform">
                <Canvas Width="16" Height="16">
                    <Rectangle Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" 
                               Width="10" Height="10" Canvas.Left="3" Canvas.Top="3"/>
                </Canvas>
            </Viewbox>
        </ControlTemplate>
        
        <ControlTemplate x:Key="PauseIcon">
            <Viewbox Stretch="Uniform">
                <Canvas Width="16" Height="16">
                    <Rectangle Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" 
                               Width="4" Height="10" Canvas.Left="3" Canvas.Top="3"/>
                    <Rectangle Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" 
                               Width="4" Height="10" Canvas.Left="9" Canvas.Top="3"/>
                </Canvas>
            </Viewbox>
        </ControlTemplate>
        
        <ControlTemplate x:Key="PlayIcon">
            <Viewbox Stretch="Uniform">
                <Canvas Width="16" Height="16">
                    <Path Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" 
                          Data="M4,3 L12,8 L4,13 Z"/>
                </Canvas>
            </Viewbox>
        </ControlTemplate>
        
        <ControlTemplate x:Key="ForwardIcon">
            <Viewbox Stretch="Uniform">
                <Canvas Width="16" Height="16">
                    <Path Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" 
                          Data="M14,4 L8,8 L8,4 L2,8 L8,12 L8,8 L14,12 Z" />
                </Canvas>
            </Viewbox>
        </ControlTemplate>
        
        <ControlTemplate x:Key="RepeatIcon">
            <Viewbox Stretch="Uniform">
                <Canvas Width="16" Height="16">
                    <Path Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" 
                          Data="M3,6 L3,9 L6,9 M13,10 L13,7 L10,7 M4,4 C6,2 10,2 12,4 C14,6 14,10 12,12 C10,14 6,14 4,12 C2,10 2,6 4,4 Z" 
                          Stroke="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}"
                          StrokeThickness="1"/>
                </Canvas>
            </Viewbox>
        </ControlTemplate>
    </UserControl.Resources>
    
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Video content goes in row 0 -->
        <vlc:VideoView x:Name="VideoView" Grid.Row="0" Loaded="VideoView_Loaded"/>
        
        <StackPanel Orientation="Horizontal" Grid.Row="1" HorizontalAlignment="Center" Margin="10">
            <!-- Timestamp with fixed width -->
            <Grid Width="80" Margin="10">
                <Button x:Name="Timestamp" HorizontalAlignment="Center" VerticalAlignment="Center"
                        Style="{StaticResource RoundButton}"
                        IsEnabled="{Binding DataContext.ControlsEnabled, RelativeSource={RelativeSource FindAncestor, AncestorType=Window}}"
                        Content="00:00" />
            </Grid>

            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                <Button x:Name="Rewind10" Click="Rewind10_Click" Style="{StaticResource MediaButton}" Margin="5">
                    <Control Template="{StaticResource RewindIcon}"/>
                </Button>

                <Button x:Name="PlayButton" Click="PlayButton_Click" Style="{StaticResource MediaButton}" Margin="5">
                    <Control Template="{StaticResource PlayIcon}"/>
                </Button>
                
                <Button x:Name="StopButton" Click="StopButton_Click" Style="{StaticResource MediaButton}" Margin="5">
                    <Control Template="{StaticResource StopIcon}"/>
                </Button>

                <Button x:Name="PauseButton" Click="PauseButton_Click" Style="{StaticResource MediaButton}" Margin="5">
                    <Control Template="{StaticResource PauseIcon}"/>
                </Button>
                
                <Button x:Name="Forward10" Click="Forward10_Click" Style="{StaticResource MediaButton}" Margin="5">
                    <Control Template="{StaticResource ForwardIcon}"/>
                </Button>
                
                <Button x:Name="Repeat" Click="Repeat_Click" Style="{StaticResource MediaButton}" Margin="5">
                    <Control Template="{StaticResource RepeatIcon}"/>
                </Button>
                
                <Slider x:Name="Volume" Width="80" Margin="10" 
                        Maximum="100" Minimum="0" Value="80"
                        ValueChanged="Volume_ValueChanged"/>
            </StackPanel>
        </StackPanel>
        
        <!-- Video slider -->
        <Slider x:Name="VideoSlider" Grid.Row="2" Margin="10"
                ValueChanged="VideoSlider_ValueChanged"
                PreviewMouseDown="VideoSlider_DragStarted"
                PreviewMouseUp="VideoSlider_DragCompleted"/>
    </Grid>
</UserControl>